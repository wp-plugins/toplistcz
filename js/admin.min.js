jQuery(document).ready(function(a){function l(a,e){e=e||0;var b=[],d;for(d in a)b.push([parseInt(d)+e,parseInt(a[d])]);return b}function m(f,b,c){c=c||.35;var d=[{data:l(f.navstevy,-c),label:"N\u00e1v\u0161t\u011bvy",color:"#994c4c"},{data:l(f.zhlednuti),label:"Zhl\u00e9dnut\u00ed",color:"#404080"}],g={bars:{show:!0,lineWidth:1,barWidth:c},xaxis:{ticks:Object.keys(f.navstevy).length,minTickSize:1,tickDecimals:0,tickLength:0},grid:{hoverable:!0,borderWidth:1,borderColor:"LightGray"}};a.plot(b,d,g);b.attr("data",JSON.stringify(f));a(window).resize(function(){a.plot(b,d,g)});a("body").on("click","#toplist_cz_dashboard .handlediv",function(){a("#toplist_cz_dashboard").hasClass("closed")||a.plot(b,d,g)})}function k(){var b=JSON.parse(window.atob(a("#toplist_cz_dashboard #toplist_stats").attr("value")));m(b.navstevy_za_den,a("#navstevy-za-den .graph"));m(b.navstevy_za_mesic,a("#navstevy-za-mesic .graph"))}var h=a("#toplist_cz_dashboard").hasClass("closed"),b=a("#toplist_cz_dashboard .inside");a("body").on("mouseenter","#toplist_cz_dashboard .inside table tr td",function(b,e,c){b=a(this);this.offsetWidth<this.scrollWidth&&!b.attr("title")&&b.attr("title",b.text())});a("body").on("plothover","#toplist_cz_dashboard .inside div.graph",function(b,e,c){if(c){if(previousPoint!=c.datapoint){previousPoint=c.datapoint;a("#flot-tooltip").remove();b=JSON.parse(a(this).attr("data"));var d=e=Math.round(c.datapoint[0]);0<=a(this).parent().attr("id").indexOf("za-den")?d=e+"<sup>00</sup> &ndash; "+(e+1)+"<sup>00</sup>":0<=a(this).parent().attr("id").indexOf("za-mesic")&&(d=JSON.parse(window.atob(a("#toplist_cz_dashboard #toplist_stats").attr("value"))),d=e+". "+d.navstevy_za_mesic.mesic.toLowerCase());var g=c.pageX;c=c.pageY;a('<div id="flot-tooltip">'+("<strong>"+d+"</strong><br />N\u00e1v\u0161t\u011bvy: <strong>"+b.navstevy[e]+"</strong><br />Zhl\u00e9dnut\u00ed: <strong>"+b.zhlednuti[e]+"</strong>")+"</div>").css({top:c-20,left:100>g?g+25:g-95,"border-color":void 0}).appendTo("body").show()}}else a("#flot-tooltip").remove(),previousPoint=null});var n={action:"toplist_cz_dashboard_content",_wpnonce:a("#toplist_cz_dashboard .inside #toplist_nonce").attr("value")};a("body").on("click","#toplist_cz_dashboard #toplist_password_form #toplist_password_submit",function(){b.removeClass("toplist_error_pulsate");var f=a(this).parents("form").find("#toplist_password");""==f.val()?(f.css("background-color","LightPink"),alert("Please fill-in the password.")):(a("#toplist_cz_dashboard .inside #toplist_password_form .spinner").css("display","inline-block"),f={action:"toplist_cz_save_password",_wpnonce:a(this).parents("form").find("#toplist_password_nonce").val(),password:f.val()},a("form#toplist_password_form input").attr("disabled",!0),a.post(ajaxurl,f,function(a){a.success?(b.removeClass("error"),b.slideUp("fast").html(a.html).slideDown("fast"),k()):(b.html(a.html),b.addClass("toplist_error_pulsate"))}).fail(function(){b.html("fail");b.addClass("toplist_error_pulsate")}))});""==b.text().trim()?a.post(ajaxurl,n,function(a){h||b.hide();b.html(a.html);h||b.slideDown("fast",function(){b.removeAttr("style")});a.success?(b.removeClass("error"),k()):b.addClass("error")}).fail(function(){h||b.hide();b.html("fail").addClass("error");h||b.slideDown("fast",function(){b.removeAttr("style")})}):k()});